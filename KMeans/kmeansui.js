function vml_kmeansui(){this.oDataGen=null;this.oAlgo=new vml_kmeans();this.oTrainTimer=undefined;this.iAnimationTime=100;this.Init=function(){this.oDataGen=new vml_DataGen();this.oDataGen.Init(undefined,true);document.getElementById("trainBtn").addEventListener("click",this.Train.bind(this),false);document.getElementById("stopBtn").addEventListener("click",this.Stop.bind(this),false);document.getElementById("resetModel").addEventListener("click",this.ResetModel.bind(this),false);document.getElementById("stopBtn").disabled=true};this.Plot=function(){var a=this.oDataGen.lData;a.push({label:"Cluster center",data:this.oAlgo.lCenters,color:this.oDataGen.oClassB.Color,points:{show:true}});$.plot("#"+this.oDataGen.strPlotDiv,a,this.oDataGen.oPlotSettings);a.splice(a.length-1,1)};this.Stop=function(){clearInterval(this.oTrainTimer);document.getElementById("stopBtn").disabled=true;document.getElementById("trainBtn").disabled=false};this.Train=function(){if(this.IsAnimated()){document.getElementById("stopBtn").disabled=false;document.getElementById("trainBtn").disabled=true;this.TrainAnimateCounter=this.GetNumberOfIterations();this.TrainingAnimate();this.oTrainTimer=setInterval(this.TrainingAnimate.bind(this),this.iAnimationTime)}else{for(var a=0;a!=this.GetNumberOfIterations();a++){this.oAlgo.FitStep()}}this.Plot()};this.TrainingAnimate=function(){if(this.TrainAnimateCounter==0){clearInterval(this.oTrainTimer);document.getElementById("stopBtn").disabled=true;document.getElementById("trainBtn").disabled=false}else{this.oAlgo.FitStep();this.Plot();this.TrainAnimateCounter--}};this.ResetModel=function(){this.oAlgo.Init(this.oDataGen.oClassA.Data,this.GetNumClusters());this.Plot()};this.IsAnimated=function(){return document.getElementById("showAnimation").checked};this.GetNumberOfIterations=function(){var a=document.getElementById("numTrainItr").value;if(a==""){return 0}else{return parseInt(a)}};this.GetNumClusters=function(){var a=document.getElementById("numCluster").value;if(a==""){return 1}else{return parseInt(a)}}};