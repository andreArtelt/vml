function vml_PerceptronUI(){this.oDataGen=undefined;this.oAlgo=undefined;this.lDecBound=[];this.oTrainTimer=undefined;this.iAnimationTime=100;this.Init=function(){this.oDataGen=new vml_DataGen();this.oDataGen.Init();this.oAlgo=new vml_Perceptron();document.getElementById("trainBtn").addEventListener("click",this.Train.bind(this),false);document.getElementById("stopBtn").addEventListener("click",this.Stop.bind(this),false);document.getElementById("resetPerceptron").addEventListener("click",this.ResetPerceptron.bind(this),false);document.getElementById("stopBtn").disabled=true};this.Plot=function(){var a=this.oDataGen.lData;a.push({label:"Decision boundary",data:this.lDecBound,lines:{show:true}});$.plot("#plotArea",a,this.oDataGen.oPlotSettings);a.splice(a.length-1,2)};this.ComputeDecisionBoundary=function(){this.lDecBound=[];var d=this.oAlgo.lWeights.valueOf();var c=-1*(d[0]/d[1]);var a=d[2]/d[1];for(var e=-5;e<=5;e+=0.05){this.lDecBound.push([e,c*e-a])}};this.GetLearningRate=function(){var a=document.getElementById("learningRate").value;if(a==""){return 1}else{return a}};this.GetNumberOfIterations=function(){var a=document.getElementById("numTrainItr").value;if(a==""){return 0}else{return a}};this.IsAnimated=function(){return document.getElementById("showAnimation").checked};this.ResetPerceptron=function(){this.oAlgo.Init(this.oDataGen.oClassA.Data,this.oDataGen.oClassB.Data);this.ComputeDecisionBoundary();this.Plot()};this.Stop=function(){clearInterval(this.oTrainTimer);document.getElementById("stopBtn").disabled=true;document.getElementById("trainBtn").disabled=false};this.Train=function(){if(this.IsAnimated()){document.getElementById("stopBtn").disabled=false;document.getElementById("trainBtn").disabled=true;this.TrainAnimateCounter=this.GetNumberOfIterations();this.TrainingAnimate();this.oTrainTimer=setInterval(this.TrainingAnimate.bind(this),this.iAnimationTime)}else{for(var a=0;a!=this.GetNumberOfIterations();a++){this.oAlgo.FitStep(this.GetLearningRate())}this.ComputeDecisionBoundary();this.Plot()}};this.TrainingAnimate=function(){if(this.TrainAnimateCounter==0){clearInterval(this.oTrainTimer);document.getElementById("stopBtn").disabled=true;document.getElementById("trainBtn").disabled=false}else{this.oAlgo.UpdateWeights(this.GetLearningRate());this.ComputeDecisionBoundary();this.Plot();this.TrainAnimateCounter--}}};