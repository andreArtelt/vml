function vml_knn(){this.iK=1;this.lData=[];this.lLabel=[];this.Init=function(c,b,a){this.iK=a;this.lData=c;this.lLabel=b};this.myDistance=function(d,c){if(d.length==1){return math.abs(d[0]-c[0])}else{return math.distance(d,c)}};this.FindKnn=function(c){var a=[];for(var b=0;b!=this.lData.length;b++){this.insert(a,this.lData[b],this.lLabel[b],this.myDistance(c,this.lData[b]))}return a};this.insert=function(b,c,e,a){for(var d=0;d!=b.length;d++){if(b[d].d>=a){b.splice(d,0,{x:c,t:e,d:a});if(b.length>this.iK){b.pop()}return}}if(b.length<this.iK){b.push({x:c,t:e,d:a})}};this.PredictRegression=function(c){lKnn=this.FindKnn(c);var b=0;for(var a=0;a!=lKnn.length;a++){b+=lKnn[a].t}b/=this.iK;return b};this.PredictClassification=function(c){lKnn=this.FindKnn(c);var a=0;for(var b=0;b!=lKnn.length;b++){a+=lKnn[b].t}if(a<0){a=[1,0]}else{if(a==0){a=[0.5,0.5]}else{a=[0,1]}}return a}};